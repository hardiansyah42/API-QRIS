<?php
$apiKey    = trim('YOUR_API_KEY'); // Ganti dengan API Key Anda
$secretKey = trim('YOUR_SECRET_KEY'); // Ganti dengan Secret Key Anda
$timestamp = time();

// 1. Generate Signature
$payload   = $apiKey . $timestamp;
$signature = base64_encode(hash_hmac("sha256", $payload, $secretKey, true));

// 2. Headers
$headers = [
    "Authorization: Bearer " . $apiKey,
    "x-api-key: " . $apiKey,
    "x-timestamp: " . $timestamp,
    "x-signature: " . $signature,
    "Content-Type: application/json"
];

// 3. Body (Contoh Withdraw)
$data = [
    "amount" => 50000, // Ganti dengan jumlah yang ingin ditarik
    "bank_code" => "BCA", // Ganti dengan kode bank yang sesuai
    "account_number" => "1234567890", // Ganti dengan nomor rekening
    "account_name" => "Nama Pemilik Rekening" // Ganti dengan nama pemilik rekening
];

// 4. Eksekusi
$ch = curl_init("https://veripay.site/api/v1/merchant/payments/payout");
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($data));
curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$response = curl_exec($ch);
curl_close($ch);

echo $response;
?>
